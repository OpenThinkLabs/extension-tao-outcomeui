{"version":3,"file":"routes.js","sources":["routes.js","inspectResults.js","resultTable.js","json!taoItems/preview/resources/device-list.json","../../taoItems/preview/tpl/preview!tpl","../../taoItems/preview/preview.js","viewResult.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoOutcomeUi/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Results': {\n            'actions': {\n                'viewResult' : 'controller/viewResult',\n                'index' : 'controller/inspectResults'\n            }\n        },\n        'ResultTable': {\n            'actions': {\n                'index' : 'controller/resultTable'\n            }       \n        }\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoOutcomeUi/controller/inspectResults',[\n    'jquery', \n    'i18n', \n    'module',\n    'helpers', \n    'layout/actions/binder',\n    'layout/section',\n    'uri',\n    'ui/feedback',\n    'ui/datatable'\n], function($, __, module, helpers, binder, section, uri, feedback) {\n    'use strict';\n\n    /**\n     * Load results into the datatable\n     * @param {jQueryElement} $container - the  container \n     * @param {Object} model - the data model for the table\n     * @param {String} classUri - The delivery result uri\n     */\n    function loadResults($container, model, classUri){\n        var params = {\n            classUri : classUri\n        };\n        $('.inspect-results-grid', $container)\n            .empty()\n            .data('ui.datatable', null)\n            .on('load.datatable', function(){\n                $('.export-table', $container)\n                    .off('click')\n                    .removeClass('disabled')\n                    .on('click', function(e){\n                        e.preventDefault();\n                        section.create({\n                            id      : 'buildTableTab',\n                            name    : __('Export Delivery Results'),\n                            url     : helpers._url('index', 'ResultTable', 'taoOutcomeUi', params),\n                            contentBlock : true\n                        }).show();\n                    });\n            })\n            .datatable({ \n                url  : helpers._url('getResults', 'Results', 'taoOutcomeUi', params),\n                model : model,\n                actions : {\n                    'view' : function openResource(id){\n                                var action = {binding : \"load\", url: helpers._url('viewResult', 'Results', 'taoOutcomeUi')};\n                                binder.exec(action, {uri : uri.encode(id), classUri : classUri} || this._resourceContext);\n                            },\n                    'delete' : function deleteResource(id){\n                        // prompt a confirmation lightbox and then delete the result\n                        var confirmBox = $('.preview-modal-feedback'),\n                            cancel = confirmBox.find('.cancel'),\n                            save = confirmBox.find('.save'),\n                            close = confirmBox.find('.modal-close');\n\n                        confirmBox.modal({ width: 500 });\n\n                        save.off('click')\n                            .on('click', function () {\n                            $.ajax({\n                                url: helpers._url('delete', 'Results', 'taoOutcomeUi'),\n                                type: \"POST\",\n                                data: {\n                                    uri: uri.encode(id)\n                                },\n                                dataType: 'json',\n                                success: function(response){\n                                    if(response.deleted){\n                                        feedback().success(__('Result has been deleted'));\n                                        loadResults($container,model,classUri);\n                                    }\n                                    else{\n                                        feedback().error(__('Something went wrong ...')+'<br>'+response.error);\n                                    }\n                                }\n                            });\n                            confirmBox.modal('close');\n                        });\n\n                        cancel.off('click')\n                              .on('click', function () {\n                            confirmBox.modal('close');\n                        });\n\n\n                    }\n    }\n            });\n    }\n\n    /**\n     * @exports taoOutcomeUi/controller/resultTable\n     */\n    var inspectResultController =  {\n\n        /**\n         * Controller entry point\n         */\n        start : function(){\n            var conf = module.config();\n            var $container = $('#inspect-result');\n            //load results also at the beginning unfiltered\n            loadResults($container, conf.model, conf.uri);\n        }\n    };\n\n    return inspectResultController;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoOutcomeUi/controller/resultTable',[\n    'jquery', \n    'lodash',\n    'i18n', \n    'helpers',\n    'module',\n    'ui/datatable', \n    'jquery.fileDownload'\n], function($, _, __, helpers, module) {\n    'use strict';\n\n    /**\n     * @exports taoOutcomeUi/controller/resultTable\n     */\n    var resulTableController =  {\n\n        /**\n         * Controller entry point\n         */\n        start : function(){\n\t   \n           var conf = module.config();\n           var $container = $(\".result-table\");\n           var $filterField = $('.result-filter', $container);\n           var $tableContainer = $('.result-table-container', $container);\n           var filter = conf.filter || 'lastSubmitted';\n           var classUri = conf.classUri || '';\n            //keep columns through calls\n            var columns = [];\n            var groups = {};\n\n            /**\n             * Load columns to rebuild the datatable dynamically\n             * @param {String} url  - the URL that retrieve the columns\n             * @param {String} [action = 'add'] - 'add' or 'remove' the retrieved columns\n             * @param {Function} done - once the datatable is loaded\n             */\n            var buildGrid = function buildGrid(url, action, done){\n                $.ajax({\n                    url : url,\n                    dataType : 'json',\n                    data : {filter : filter, classUri : classUri},\n                    type :'GET'\n                }).done(function(response){\n                    if(response && response.columns){\n                        if(action === 'remove'){\n                            columns = _.reject(columns, function(col){\n                               return _.find(response.columns, function(resCol){\n                                    return _.isEqual(col, resCol);\n                               });\n                            });\n                        } else {\n                            if(response.first !== undefined && response.first === true){\n                                columns = response.columns.concat(columns);\n                            }\n                            else{\n                                columns = columns.concat(response.columns);\n                            }\n                        }\n                        _buildTable(done);\n                    }\n                });\n            };\n            \n            /**\n             * Rebuild the datatable \n             * @param {Function} done - once the datatable is loaded\n             */\n            var _buildTable = function _buildTable(done){\n                var model = [];\n\n                //set up model from columns \n                _.forEach(columns, function(col){\n                    model.push({\n                        id : col.prop || (col.contextId + '_' + col.variableIdentifier),\n                        label : col.label,\n                        sortable: false\n                    });\n                });\n                \n                //re buid the datatable\n                $tableContainer\n                    .empty()\n                    .data('ui.datatable', null)\n                    .off('load.datatable')\n                    .on('load.datatable', function(){\n\n                        //enable to export the loaded table\n                        $('.result-export', $container)\n                            .off('click')\n                            .removeClass('disabled')\n                            .on('click', function(e){\n                                e.preventDefault();\n                                $.fileDownload(helpers._url('getCsvFile', 'ResultTable', 'taoOutcomeUi'), {\n                                    preparingMessageHtml: __(\"We are preparing your report, please wait...\"),\n                                    failMessageHtml: __(\"There was a problem generating your report, please try again.\"),\n                                    httpMethod: 'POST',\n                                    data: {'filter': filter, 'columns': columns, classUri : classUri}\n                                });\n                            });\n\n                        if(_.isFunction(done)){\n                            done();\n                            done = '';\n                        }\n                    })\n                    .datatable({\n                        url : helpers._url('data', 'ResultTable', 'taoOutcomeUi', {filterData : filter}),\n                        querytype : 'POST',\n                        params : {columns : columns,  '_search' : false, classUri : classUri},\n                        model :  model\n                    });\n            };\n\n            //group button to toggle them\n            $('[data-group]', $container).each(function(){\n                var $elt = $(this);\n                var group = $elt.data('group');\n                var action = $elt.data('action');\n                groups[group] = groups[group] || {};\n                groups[group][action] = $elt;\n            });\n\n            //regarding button data, we rebuild the table\n            $container.on('click', '[data-group]', function(e){\n                e.preventDefault();\n                var $elt    = $(this);\n                var group   = $elt.data('group');\n                var action  = $elt.data('action');\n                var url     = $elt.data('url');\n                buildGrid(url, action, function(){\n                    _.forEach(groups[group], function($btn){\n                       $btn.toggleClass('hidden');\n                    });\n                });\n            });\n\n            //default table\n            buildGrid(helpers._url('getResultOfSubjectColumn', 'ResultTable', 'taoOutcomeUi', {filter : filter}));\n\n            //setup the filtering\n            $filterField.select2({\n                minimumResultsForSearch : -1\n            }).select2('val', filter);\n\n            $('.result-filter-btn', $container).click(function(e) {\n                filter = $filterField.select2('val');\n                //rebuild the current table\n                _buildTable();\n            });\n        }\n    };\n    return resulTableController;\n});\n\n","\ndefine(\"json!taoItems/preview/resources/device-list.json\", function(){ return {\n    \"tablets\": {\n        \"193986c3715c81838870f908fa98d69a\": {\n            \"label\": \"Amazon Kindle Fire HDX 7\\u2033\",\n            \"width\": 960,\n            \"height\": 600\n        },\n        \"4e8eafab11aad1486992d7ee2c8c16ca\": {\n            \"label\": \"Apple iPad\",\n            \"width\": 1024,\n            \"height\": 768\n        },\n        \"5aac2932d9ad00d6d8a1604b8f9e4e8d\": {\n            \"label\": \"Google Nexus 10, Motorola Xoom, Xyboard\",\n            \"width\": 1280,\n            \"height\": 800\n        },\n        \"9805d9753ad08c7630a9ee5418aa6c6c\": {\n            \"label\": \"Google Nexus 7\",\n            \"width\": 966,\n            \"height\": 604\n        },\n        \"d4a431cedf4705d6bf2cba6d5788378b\": {\n            \"label\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\n            \"width\": 1280,\n            \"height\": 800\n        }\n    },\n    \"phones\": {\n        \"1b89338531ef0155c8d6abc2ac02c81a\": {\n            \"label\": \"Apple iPhone 3GS\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 320,\n            \"dpHeight\": 480\n        },\n        \"3f89da99d84214cde7df87ebe0699a6f\": {\n            \"label\": \"Apple iPhone 4\",\n            \"width\": 640,\n            \"height\": 960,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1920\n        },\n        \"0d36971a5b98b367f54ced708c9af849\": {\n            \"label\": \"Apple iPhone 5\",\n            \"width\": 640,\n            \"height\": 1136,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 2272\n        },\n        \"026beffcc051af995660ebdede986ace\": {\n            \"label\": \"BlackBerry Z10\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"fd2dd53e667d6d49e4fa73356fa941dd\": {\n            \"label\": \"BlackBerry Z30\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"707584c1ae17d9b5b2cbe8603c91c147\": {\n            \"label\": \"Google Nexus 4\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"91823264de952e7f2347e07db5c4058b\": {\n            \"label\": \"Google Nexus 5\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"cd69817a6e147e8a4677389e56fcf568\": {\n            \"label\": \"Google Nexus S\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"75994faa6a38e31e99b53fcd75534a33\": {\n            \"label\": \"HTC Evo, Touch HD, Desire HD, Desire\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0cab4dfccdfc880687cb608cfe4159db\": {\n            \"label\": \"HTC One X, EVO LTE\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"c4ff41fcba24d74fc21dc3490ca1edc9\": {\n            \"label\": \"HTC Sensation, Evo 3D\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 360,\n            \"dpHeight\": 1440\n        },\n        \"fa969a5e0dd2de53700eeee4ba4ba142\": {\n            \"label\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"33c4f9364e295ec03531f3a3425819cf\": {\n            \"label\": \"LG Optimus G\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"bc47f5275f0efd56fee52d43a8082981\": {\n            \"label\": \"LG Optimus LTE, Optimus 4X HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1.7,\n            \"dpWidth\": 424,\n            \"dpHeight\": 2176\n        },\n        \"0732887e6e324fd10777b735520a34cf\": {\n            \"label\": \"LG Optimus One\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 213,\n            \"dpHeight\": 720\n        },\n        \"2e38a78364f09d0da0e9e1a3a68e7fb0\": {\n            \"label\": \"Motorola Defy, Droid, Droid X, Milestone\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1281\n        },\n        \"bd4b78dddc7c9625a4141a1b1ddabb87\": {\n            \"label\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 540,\n            \"dpHeight\": 960\n        },\n        \"3bf1edf21cfa81006183d2b02974c84e\": {\n            \"label\": \"Motorola Droid Razr HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 720,\n            \"dpHeight\": 1280\n        },\n        \"ab5a352e0e016b97dac986f06c394f55\": {\n            \"label\": \"Nokia C5, C6, C7, N97, N8, X7\",\n            \"width\": 360,\n            \"height\": 640,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 360,\n            \"dpHeight\": 640\n        },\n        \"4826fb7d7257aeaac992ce699df41b3c\": {\n            \"label\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0a691ab20add7c432200f8fa6527b488\": {\n            \"label\": \"Samsung Galaxy Note\",\n            \"width\": 800,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 400,\n            \"dpHeight\": 2560\n        },\n        \"9c23ee31be29960fbac9e9bbfc2fc7b0\": {\n            \"label\": \"Samsung Galaxy Note 3\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 540,\n            \"dpHeight\": 3840\n        },\n        \"92177c0508c1d73905a58e2338f2a81f\": {\n            \"label\": \"Samsung Galaxy Note II\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"5222b8866dc4cc606725e16ffcc0a783\": {\n            \"label\": \"Samsung Galaxy S III, Galaxy Nexus\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"37c1541e2bd55cfd0f4073b0ccdf68b3\": {\n            \"label\": \"Samsung Galaxy S, S II, W\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"2f7f64b7dda0144907ff300e83eed465\": {\n            \"label\": \"Samsung Galaxy S4\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"9c24f9057744dad56043702a9703127f\": {\n            \"label\": \"Sony Xperia S, Ion\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"0a8b2732a016a9395c3af5f12dd9c0da\": {\n            \"label\": \"Sony Xperia Sola, U\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 480,\n            \"dpHeight\": 854\n        },\n        \"5a153d7f53d82dcb0801f041574a6a43\": {\n            \"label\": \"Sony Xperia Z, Z1\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        }\n    },\n    \"screens\": {\n        \"9e523ae15b61dc766f5c818726881ecf\": {\n            \"label\": \"1920 \\u00d7 1080\",\n            \"width\": 1920,\n            \"height\": 1080,\n            \"dpWidth\": 1920,\n            \"dpHeight\": 1080,\n            \"scaleFactor\": 1\n        },\n        \"07769cd8d0a7d09818b2f0b018042fb7\": {\n            \"label\": \"1366 \\u00d7 768\",\n            \"width\": 1366,\n            \"height\": 768,\n            \"dpWidth\": 1366,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"72d5478a24194f98b9378e8e0fd65737\": {\n            \"label\": \"1280 \\u00d7 1024\",\n            \"width\": 1280,\n            \"height\": 1024,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 1024,\n            \"scaleFactor\": 1\n        },\n        \"b7a6dd5900cc72e61f0d3479c7e314ec\": {\n            \"label\": \"1280 \\u00d7 800\",\n            \"width\": 1280,\n            \"height\": 800,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 800,\n            \"scaleFactor\": 1\n        },\n        \"43193b0ff671a37d8232ab664190a125\": {\n            \"label\": \"1024 \\u00d7 768\",\n            \"width\": 1024,\n            \"height\": 768,\n            \"dpWidth\": 1024,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"c29e48814af5443ff5688d9e967ce917\": {\n            \"label\": \"800 \\u00d7 600\",\n            \"width\": 800,\n            \"height\": 600,\n            \"dpWidth\": 800,\n            \"dpHeight\": 600,\n            \"scaleFactor\": 1\n        }\n    }\n};});\n\n","\ndefine('tpl!taoItems/preview/tpl/preview', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-value=\\\"\";\n  if (helper = helpers.dataValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.dataValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"preview-overlay tao-scope overlay preview-\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-no-print\\\"\\n     style=\\\"overflow-x: hidden;display:none\\\">\\n    <div class=\\\"preview-container-outer\\\">\\n        <form class=\\\"preview-utility-bar plain\\\">\\n            <div class=\\\"preview-utility-bar-inner grid-row\\\">\\n\\n                <div class=\\\"col-4\\\">\\n                    <input type=\\\"hidden\\\" value=\\\"\\\" data-value=\\\"\\\" class=\\\"standard-device-selector preview-device-selector\\\" data-target=\\\"standard\\\">\\n                    <select class=\\\"preview-type-selector\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.previewTypes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 standard-only device-type-and-orientation\\\"></div>\\n                <div class=\\\"col-6 desktop-only device-type-and-orientation\\\">\\n                    <select class=\\\"desktop-device-selector preview-device-selector\\\" data-target=\\\"desktop\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.desktopDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 mobile-only device-type-and-orientation\\\">\\n                    <select class=\\\"mobile-device-selector preview-device-selector\\\" data-target=\\\"mobile\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mobileDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    <select tabindex=\\\"-1\\\" class=\\\"mobile-orientation-selector orientation-selector\\\"\\n                            data-target=\\\"mobile\\\">\\n                        <option value=\\\"landscape\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Landscape\", options) : helperMissing.call(depth0, \"__\", \"Landscape\", options)))\n    + \"</option>\\n                        <option value=\\\"portrait\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Portrait\", options) : helperMissing.call(depth0, \"__\", \"Portrait\", options)))\n    + \"</option>\\n                    </select>\\n                </div>\\n                <div class=\\\"col-2\\\">\\n                    <!--label>\\n                        <input type=\\\"checkbox\\\"/>\\n                        <span class=\\\"icon-checkbox\\\"></span>\\n                        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Scale \", options) : helperMissing.call(depth0, \"__\", \"Scale \", options)))\n    + \"\\n                    </label-->\\n                        <span class=\\\"btn-info small preview-closer rgt\\\">\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\n                            <span class=\\\"icon-close r\\\"></span>\\n                        </span>\\n                </div>\\n            </div>\\n            <div class=\\\"preview-message-box\\\">\\n                <div class=\\\"feedback-info small\\\">\\n                    <span class=\\\"icon-info\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This preview may be scaled to fit your screen. The final rendering may differ.\", options) : helperMissing.call(depth0, \"__\", \"This preview may be scaled to fit your screen. The final rendering may differ.\", options)))\n    + \"\\n                    <a href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Don’t show this again!\", options) : helperMissing.call(depth0, \"__\", \"Don’t show this again!\", options)))\n    + \"</a>\\n                    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove this message\", options) : helperMissing.call(depth0, \"__\", \"Remove this message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n                </div>\\n            </div>\\n        </form>\\n        <div class=\\\"preview-canvas\\\">\\n\\n            <div class=\\\"preview-scale-container\\\">\\n                <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-frame preview-outer-frame \";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-landscape\\\">\\n                    <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-container preview-container\\\">\\n                        <div class=\\\"preview-item-container\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div id=\\\"preview-console\\\">\\n        <span class=\\\"icon-close preview-console-closer\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close console\", options) : helperMissing.call(depth0, \"__\", \"Close console\", options)))\n    + \"\\\"></span>\\n\\n        <div class=\\\"preview-console-header grid-row clearfix\\\">\\n            <div class=\\\"col-12\\\">\\n                <button type=\\\"button\\\" class=\\\"btn-info small rgt\\\" id=\\\"preview-submit-button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submit\", options) : helperMissing.call(depth0, \"__\", \"Submit\", options)))\n    + \"</button>\\n            </div>\\n        </div>\\n        <div class=\\\"preview-console-body clear\\\">\\n            <ul></ul>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoItems/preview/preview',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/strPad',\n    'json!taoItems/preview/resources/device-list.json',\n    'tpl!taoItems/preview/tpl/preview',\n    'ui/modal',\n    'select2',\n    'jquery.cookie'\n], function ($, _, __, strPad, deviceList, previewTpl) {\n    'use strict';\n\n    var overlay,\n        container,\n        orientation = 'landscape',\n        previewType = 'standard',\n        previewTypes = {\n            desktop: __('Desktop preview'),\n            mobile: __('Mobile preview'),\n            standard: __('Actual size')\n        },\n        $doc = $(document),\n        $window = $(window),\n        $body = $(document.body),\n        screenSize = {\n            width: $window.innerWidth(),\n            height: $window.innerHeight()\n        },\n        maxDeviceSize = {\n            width: 0,\n            height: 0\n        },\n        scaleFactor = 1,\n        typeDependant,\n        $feedbackBox,\n        $console,\n        previewContainerMaxWidth,\n        itemUri;\n\n\n    /**\n     * Create data set for device selectors\n     *\n     * @param type\n     * @returns {Array}\n     * @private\n     */\n    var _getDeviceSelectorData = function (type) {\n\n        /*\n         * @todo\n         * The device list is currently based on the devices found on the Chrome emulator.\n         * This is not ideal and should be changed in the future.\n         * I have http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density in mind but we\n         * will need to figure what criteria to apply when generating the list.\n         */\n        var devices = type === 'mobile' ? deviceList.tablets : deviceList.screens,\n            options = [];\n\n        _.forEach(devices, function (value) {\n\n            // figure out the widest possible screen to calculate the scale factor\n            maxDeviceSize = {\n                width: Math.max(maxDeviceSize.width, value.width),\n                height: Math.max(maxDeviceSize.height, value.height)\n            };\n\n            options.push({\n                value: value.label,\n                label: value.label,\n                dataValue: [value.width, value.height].join(','),\n                selected: previewType === value.label\n            });\n        });\n\n\n        return options;\n    };\n\n    /**\n     * Collect all elements that can toggle their class name between mobile-* and desktop-*\n     *\n     * @private\n     */\n    var _setupTypeDependantElements = function () {\n        typeDependant = overlay.add(overlay.find('.preview-scale-container').find('[class*=\"' + previewType + '\"]'));\n    };\n\n\n    /**\n     * Change the class name of all type dependant elements\n     *\n     * @param type\n     */\n    var _setPreviewType = function (newType) {\n\n        if (newType === previewType) {\n            return;\n        }\n        var re = new RegExp(previewType, 'g');\n\n        typeDependant.each(function () {\n            this.className = this.className.replace(re, newType);\n        });\n\n        previewType = newType;\n    };\n\n\n    /**\n     * Set orientation\n     *\n     * @param newOrientation\n     * @private\n     */\n    var _setOrientation = function (newOrientation) {\n        if (newOrientation === orientation) {\n            return;\n        }\n\n        var re = new RegExp(orientation, 'g'),\n            previewFrame = $('.preview-outer-frame')[0];\n\n        previewFrame.className = previewFrame.className.replace(re, newOrientation);\n\n        // reset global orientation\n        orientation = newOrientation;\n    };\n\n    /**\n     * Scale devices down to fit screen\n     * @private\n     */\n    var _scale = function () {\n\n        var $scaleContainer = $('.preview-scale-container'),\n            _scaleFactor = previewType === 'standard' ? 1 : scaleFactor,\n            containerScaledWidth = $scaleContainer.width() * _scaleFactor,\n            left = (screenSize.width - containerScaledWidth) / 2;\n\n        $scaleContainer.css({\n            left: left,\n            '-webkit-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-ms-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            'transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-webkit-transform-origin': '0 0',\n            '-ms-transform-origin': '0 0',\n            'transform-origin': '0 0'\n        });\n    };\n\n    /**\n     * position the preview depending on the height of the toolbar\n     *\n     * @private\n     */\n    var _positionPreview = function () {\n        $('.preview-canvas').css({ paddingTop: $('.preview-utility-bar').outerHeight() + 5 })\n    };\n\n\n    /**\n     * Compute scale factor based on screen size and device size\n     *\n     * @private\n     */\n    var _computeScaleFactor = function () {\n\n        var scaleValues = {\n            x: 1,\n            y: 1\n        };\n\n        // 150/200 = device frames plus toolbar plus console plus some margin\n\n        var requiredSize = {\n            width: maxDeviceSize.width + 150,\n            height: maxDeviceSize.height + 275\n        };\n\n        if (requiredSize.width > screenSize.width) {\n            scaleValues.x = screenSize.width / requiredSize.width;\n        }\n\n        if (requiredSize.height > screenSize.height) {\n            scaleValues.y = screenSize.height / requiredSize.height;\n        }\n\n        scaleFactor = Math.min(scaleValues.x, scaleValues.y);\n    };\n\n    /**\n     * Add functionality to device selectors\n     *\n     * @private\n     */\n    var _setupDeviceSelectors = function () {\n\n\n        var previewDeviceSelectors = overlay.find('.preview-device-selector');\n\n        previewDeviceSelectors.on('change', function () {\n            var elem = $(this),\n                option = this.nodeName.toLowerCase() === 'select' ? this.options[this.selectedIndex] : this,\n                type = elem.data('target'),\n                val = $(option).data('value').split(','),\n                sizeSettings,\n                i = val.length,\n                container = overlay.find('.' + type + '-preview-container');\n\n\n            while (i--) {\n                val[i] = parseFloat(val[i]);\n            }\n\n            if (type === 'mobile' && orientation === 'portrait') {\n                sizeSettings = {\n                    width: val[1],\n                    height: val[0]\n                };\n            }\n            else {\n                sizeSettings = {\n                    width: val[0],\n                    height: val[1]\n                };\n            }\n\n            if (sizeSettings.width === container.width() && sizeSettings.height === container.height()) {\n                return false;\n            }\n            _setPreviewType(type);\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n        });\n\n        previewDeviceSelectors.each(function () {\n            if (this.nodeName.toLowerCase() === 'select') {\n                $(this).select2({\n                    minimumResultsForSearch: -1\n                });\n            }\n        });\n    };\n\n    /**\n     * Setup orientation selector. There is no actual orientation switch for desktop but it could\n     * be added easily if required.\n     * @private\n     */\n    var _setupOrientationSelectors = function () {\n\n        $('select.orientation-selector').on('change',function () {\n\n            var type = $(this).data('target'),\n                previewFrame = $('.' + type + '-preview-frame'),\n                container = previewFrame.find('.' + type + '-preview-container'),\n                sizeSettings,\n                newOrientation = $(this).val();\n\n            if (newOrientation === orientation) {\n                return false;\n            }\n\n            sizeSettings = {\n                height: container.width(),\n                width: container.height()\n            };\n\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n\n\n            _setOrientation(newOrientation);\n\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n    };\n\n    /**\n     * Close preview\n     *\n     * @returns {*|HTMLElement}\n     */\n    var _setupClosers = function () {\n        var $closer = overlay.find('.preview-closer'),\n            $feedbackCloser = $feedbackBox.find('.close-trigger'),\n            $hideForever = $feedbackBox.find('a');\n        var $iframe = $('#preview-iframe');\n\n        $closer.on('click', function () {\n//            commonRenderer.setContext($('.item-editor-item'));\n            overlay.hide();\n\n            //empty the iframe\n            $iframe.off('load').attr('src', 'about:blank');\n        });\n\n        $doc.keyup(function (e) {\n            if (e.keyCode === 27) {\n                $closer.trigger('click');\n            }\n        });\n\n        $feedbackCloser.on('click', function () {\n            $feedbackBox.hide();\n            _positionPreview();\n            _scale();\n        });\n\n        $hideForever.on('click', function (e) {\n            e.preventDefault();\n            $.cookie('hidePreviewFeedback', true, { expires: 1000, path: '/' });\n            $feedbackCloser.trigger('click');\n        });\n    };\n\n    /**\n     * Build options for preview types\n     *\n     * @returns {Array}\n     * @private\n     */\n    var _getPreviewTypes = function () {\n        var options = [];\n        _(previewTypes).forEach(function (_previewLabel, _previewType) {\n            options.push({\n                value: _previewType,\n                label: _previewLabel,\n                selected: previewType === _previewType\n            });\n        });\n        return options;\n    };\n\n    /**\n     * Select preview type\n     *\n     * @private\n     */\n    var _setupViewSelector = function () {\n\n        $('select.preview-type-selector').on('change',function () {\n            var _previewType = $(this),\n                value = _previewType.val();\n\n            _setPreviewType(value);\n\n            $('.' + value + '-device-selector').trigger('change');\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n\n    };\n\n    var _adaptFrameSize = function () {\n\n        var $previewContainer = $('.preview-container'),\n            $iframe = (function () {\n                var _iframe = $previewContainer.find('iframe');\n                _iframe.height('');\n                return _iframe;\n            }()),\n            contentHeight = $iframe.contents().outerHeight(),\n            containerHeight = $previewContainer.innerHeight();\n\n        if (previewType !== 'standard') {\n            if (contentHeight < containerHeight) {\n                contentHeight = containerHeight;\n            }\n        }\n        else {\n            $previewContainer.height(contentHeight + 10);\n        }\n\n        $iframe.height(contentHeight);\n    };\n\n\n    /**\n     * Set the size for the standard preview\n     * @param height\n     * @private\n     */\n    var _updateStandardPreviewSize = function (height) {\n        var $selector = $('.standard-device-selector'),\n            values = ($selector.val() ? $selector.val().split(',') : '') || [$window.width().toString()],\n            valueStr = values.join(',');\n\n        values[1] = height || values[1] || '1200';\n\n        $selector.val(valueStr).data('value', valueStr);\n    };\n\n    var _initConsole = function () {\n\n        var $body = $console.find('.preview-console-body'),\n            $listing = $body.find('ul'),\n            $closer = $console.find('.preview-console-closer');\n\n        $console.off('updateConsole').on('updateConsole', function (event, type, message) {\n            var timer = new Date(),\n                logTime = [\n                    strPad(timer.getHours(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getMinutes(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getSeconds(), 2, '0', 'STR_PAD_LEFT')\n                ].join(':'),\n                msgStr = '<span class=\"log-time\">' + strPad(logTime, 12, ' ') + '</span> '\n                    + '<span class=\"log-type\">' + strPad(type, 18, ' ') + '</span> '\n                    + '<span class=\"log-message\">' + strPad(message, 18, ' ') + '</span>';\n            $listing.append('<li><pre>' + msgStr + '</pre></li>');\n            if (!$body.is(':visible')) {\n                $body.slideDown('slow', function () {\n                    $closer.show();\n                    $listing.scrollTop(10000);\n                });\n            }\n            else {\n                $listing.scrollTop(10000);\n            }\n        });\n\n        $closer.on('click', function () {\n            $body.slideUp('slow', function () {\n                $closer.hide();\n            });\n        });\n    };\n\n\n    /**\n     * Display the preview\n     */\n    var show = function () {\n\n        $.ajax({\n            url: itemUri,\n            dataType: 'html'\n        }).done(function (data) {\n            $('.preview-item-container').html(data);\n        });\n\n        // $.show() does not work from the item manager\n        // this is either a miracle or a jquery bug\n        // overlay.hide().show();\n        overlay[0].style.display = 'block';\n        overlay.height('100%');\n        overlay.find('select:visible').trigger('change');\n        _scale();\n        _positionPreview();\n    };\n\n    /**\n     * Create preview\n     *\n     * @param string _itemUri\n     */\n    var init = function (_itemUri) {\n\n        if(!_itemUri || _itemUri.length === 0){\n            throw new TypeError('Wrong URI');\n        }\n\n        $('.preview-overlay').remove();\n        container = null;\n        overlay = $(previewTpl({\n            mobileDevices: _getDeviceSelectorData('mobile'),\n            desktopDevices: _getDeviceSelectorData('desktop'),\n            previewTypes: _getPreviewTypes(),\n            previewType: previewType\n        }));\n\n        $body.append(overlay);\n\n        previewContainerMaxWidth = parseInt($('.preview-container').css('max-width'), 10);\n\n        $feedbackBox = overlay.find('.preview-message-box');\n        if ($.cookie('hidePreviewFeedback')) {\n            $feedbackBox.hide();\n        }\n\n        $console = overlay.find('#preview-console');\n\n        _initConsole();\n        _updateStandardPreviewSize();\n        _setupTypeDependantElements();\n        _setupDeviceSelectors();\n        _setupOrientationSelectors();\n        _setupViewSelector();\n        _setupClosers();\n        _computeScaleFactor();\n        _setPreviewType(previewType);\n        _setOrientation(orientation);\n\n        $window.on('resize orientationchange', function (e) {\n            screenSize = {\n                width: $window.innerWidth(),\n                height: $window.innerHeight()\n            };\n            _updateStandardPreviewSize();\n            _computeScaleFactor();\n            _scale();\n        });\n\n        itemUri = _itemUri;\n\n        return overlay;\n    };\n\n    return {\n        init: init,\n        show: show\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoOutcomeUi/controller/viewResult',[\n    'module', \n    'jquery', \n    'i18n', \n    'helpers', \n    'layout/section',\n    'taoItems/preview/preview',\n    'jquery.fileDownload'\n], function (module, $,  __,  helpers, section, preview) {\n    'use strict';    \n    \n    /**\n     * @exports taoOutcomeUi/controller/viewResult\n     */\n    var viewResultController =  {\n\n        /**\n         * Controller entry point\n         */\n        start : function(){\n           var conf = module.config();\n           var $container = $('#view-result');\n           var $filterField = $('.result-filter', $container);              \n            //set up filter field\n            $filterField.select2({\n                minimumResultsForSearch : -1\n            }).select2('val', conf.filter || 'all');\n\n            $('.result-filter-btn', $container).click(function(e) {\n                section.loadContentBlock(\n                    helpers._url('viewResult', 'Results', 'taoOutcomeUi'), {\n                    uri: conf.uri,\n                    classUri:  conf.classUri,\n                    filter: $filterField.select2('val')\n                });\n            });\n\n\n            //bind the download buttons\n            $('.download', $container).on(\"click\", function (e) {\n                var variableUri = $(this).val();\n                $.fileDownload(helpers._url('getFile', 'Results', 'taoOutcomeUi'), {\n                    preparingMessageHtml: __(\"We are preparing your report, please wait...\"),\n                    failMessageHtml: __(\"There was a problem generating your report, please try again.\"),\n                    httpMethod: \"POST\",\n                    //This gives the current selection of filters (facet based query) and the list of columns selected from the client (the list of columns is not kept on the server side class.taoTable.php\n                    data: {'variableUri': variableUri, 'deliveryUri':conf.classUri}\n                });\n            });\n\n            $('.preview', $container).on(\"click\", function (e) {\n                e.preventDefault();\n                window.scrollTo(0,0);\n                preview.init(helpers._url('forwardMe', 'ItemPreview', 'taoItems', {uri : $(this).data('uri')}));\n                preview.show();\n            });\n\n        }\n    };\n\n    return viewResultController;\n});\n\n"]}